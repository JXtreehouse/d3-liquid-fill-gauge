function liquidFillGaugeDefaultSettings(){return{minValue:0,maxValue:100,circleThickness:.05,circleFillGap:.05,circleColor:"#178BCA",waveHeight:.05,waveCount:1,waveRiseTime:1e3,waveAnimateTime:18e3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#178BCA",waveOffset:0,textVertPosition:.5,textSize:1,valueCountUp:!0,displayPercent:!0,textColor:"#045681",waveTextColor:"#A4DBf8"}}function loadLiquidFillGauge(t,a,e){function n(){U.transition().duration(e.waveAnimateTime).ease("linear").attr("transform","translate("+G(1)+",0)").each("end",function(){U.attr("transform","translate("+G(0)+",0)"),n(e.waveAnimateTime)})}null==e&&(e=liquidFillGaugeDefaultSettings());var r,i=d3.select("#"+t),l=Math.min(parseInt(i.style("width")),parseInt(i.style("height")))/2,o=parseInt(i.style("width"))/2-l,s=parseInt(i.style("height"))/2-l,d=Math.max(e.minValue,Math.min(e.maxValue,a))/e.maxValue;r=e.waveHeightScaling?d3.scale.linear().range([0,e.waveHeight,0]).domain([0,50,100]):d3.scale.linear().range([e.waveHeight,e.waveHeight]).domain([0,100]);var u=e.textSize*l/2,c=parseFloat(a).toFixed(2),p=e.valueCountUp?e.minValue:c,m=e.displayPercent?"%":"",v=e.circleThickness*l,f=e.circleFillGap*l,h=v+f,x=l-h,g=x*r(100*d),w=2*x/e.waveCount,C=1+e.waveCount,F=w*C,y=function(t){return Math.round(t)};parseFloat(c)!=parseFloat(y(c))&&(y=function(t){return parseFloat(t).toFixed(1)}),parseFloat(c)!=parseFloat(y(c))&&(y=function(t){return parseFloat(t).toFixed(2)});for(var T=[],A=0;40*C>=A;A++)T.push({x:A/(40*C),y:A/40});var P=d3.scale.linear().range([0,2*Math.PI]).domain([0,1]),M=d3.scale.linear().range([0,l]).domain([0,l]),V=d3.scale.linear().range([0,F]).domain([0,1]),I=d3.scale.linear().range([0,g]).domain([0,1]),R=d3.scale.linear().range([h+2*x+g,h-g]).domain([0,1]),G=d3.scale.linear().range([0,F-2*x]).domain([0,1]),H=d3.scale.linear().range([h+2*x,h+.7*u]).domain([0,1]),S=i.append("g").attr("transform","translate("+o+","+s+")"),q=d3.svg.arc().startAngle(P(0)).endAngle(P(1)).outerRadius(M(l)).innerRadius(M(l-v));S.append("path").attr("d",q).style("fill",e.circleColor).attr("transform","translate("+l+","+l+")");var z=S.append("text").text(y(p)+m).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",u+"px").style("fill",e.textColor).attr("transform","translate("+l+","+H(e.textVertPosition)+")"),B=d3.svg.area().x(function(t){return V(t.x)}).y0(function(t){return I(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*t.y*Math.PI))}).y1(function(){return 2*x+g}),D=S.append("defs").append("clipPath").attr("id","clipWave"+t),U=D.append("path").datum(T).attr("d",B),k=S.append("g").attr("clip-path","url(#clipWave"+t+")");k.append("circle").attr("cx",l).attr("cy",l).attr("r",x).style("fill",e.waveColor);var O=k.append("text").text(y(p)+m).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",u+"px").style("fill",e.waveTextColor).attr("transform","translate("+l+","+H(e.textVertPosition)+")");if(e.valueCountUp){var W=function(){var t=d3.interpolate(this.textContent,c);return function(a){this.textContent=y(t(a))+m}};z.transition().duration(e.waveRiseTime).tween("text",W),O.transition().duration(e.waveRiseTime).tween("text",W)}var L=h+2*x-F;e.waveRise?D.attr("transform","translate("+L+","+R(0)+")").transition().duration(e.waveRiseTime).attr("transform","translate("+L+","+R(d)+")").each("start",function(){U.attr("transform","translate(1,0)")}):D.attr("transform","translate("+L+","+R(d)+")"),e.waveAnimate&&n()}