function liquidFillGaugeDefaultSettings(){return{minValue:0,maxValue:100,circleThickness:.05,circleFillGap:.05,circleColor:"#178BCA",waveHeight:.05,waveCount:1,waveRiseTime:1e3,waveAnimateTime:18e3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#178BCA",waveOffset:0,textRise:.5,textSize:1,valueCountUp:!0,displayPercent:!0,textColor:"#045681",waveTextColor:"#A4DBf8"}}function loadLiquidFillGauge(t,e,a){function n(){U.transition().duration(a.waveAnimateTime).ease("linear").attr("transform","translate("+H(1)+",0)").each("end",function(){U.attr("transform","translate("+H(0)+",0)"),n(a.waveAnimateTime)})}null==a&&(a=liquidFillGaugeDefaultSettings());var r,i=d3.select("#"+t),l=Math.min(parseInt(i.style("width")),parseInt(i.style("height")))/2,s=parseInt(i.style("width"))/2-l,o=parseInt(i.style("height"))/2-l,u=Math.max(a.minValue,Math.min(a.maxValue,e))/a.maxValue;r=a.waveHeightScaling?d3.scale.linear().range([0,a.waveHeight,0]).domain([0,50,100]):d3.scale.linear().range([a.waveHeight,a.waveHeight]).domain([0,100]);var d=a.textSize*l/2,c=parseFloat(e).toFixed(2),p=a.valueCountUp?a.minValue:c,m=a.displayPercent?"%":"",v=a.circleThickness*l,f=a.circleFillGap*l,h=v+f,x=l-h,g=x*r(100*u),w=2*x/a.waveCount,C=1+a.waveCount,F=w*C,y=function(t){return Math.round(t)};parseFloat(c)!=parseFloat(y(c))&&(y=function(t){return parseFloat(t).toFixed(1)}),parseFloat(c)!=parseFloat(y(c))&&(y=function(t){return parseFloat(t).toFixed(2)});for(var T=[],R=0;40*C>=R;R++)T.push({x:R/(40*C),y:R/40});var A=d3.scale.linear().range([0,2*Math.PI]).domain([0,1]),M=d3.scale.linear().range([0,l]).domain([0,l]),I=d3.scale.linear().range([0,F]).domain([0,1]),G=d3.scale.linear().range([0,g]).domain([0,1]),P=d3.scale.linear().range([h+2*x+g,h-g]).domain([0,1]),H=d3.scale.linear().range([0,F-2*x]).domain([0,1]),S=d3.scale.linear().range([h+2*x,h+.7*d]).domain([0,1]),V=i.append("g").attr("transform","translate("+s+","+o+")"),q=d3.svg.arc().startAngle(A(0)).endAngle(A(1)).outerRadius(M(l)).innerRadius(M(l-v));V.append("path").attr("d",q).style("fill",a.circleColor).attr("transform","translate("+l+","+l+")");var z=V.append("text").text(y(p)+m).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",d+"px").style("fill",a.textColor).attr("transform","translate("+l+","+S(a.textRise)+")"),B=d3.svg.area().x(function(t){return I(t.x)}).y0(function(t){return G(Math.sin(2*Math.PI*a.waveOffset*-1+2*Math.PI*(1-a.waveCount)+2*t.y*Math.PI))}).y1(function(){return 2*x+g}),D=V.append("defs").append("clipPath").attr("id","clipWave"+t),U=D.append("path").datum(T).attr("d",B),k=V.append("g").attr("clip-path","url(#clipWave"+t+")");k.append("circle").attr("cx",l).attr("cy",l).attr("r",x).style("fill",a.waveColor);var O=k.append("text").text(y(p)+m).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",d+"px").style("fill",a.waveTextColor).attr("transform","translate("+l+","+S(a.textRise)+")");a.valueCountUp&&(z.transition().duration(a.waveRiseTime).tween("text",function(){var t=d3.interpolate(this.textContent,c);return function(e){this.textContent=y(t(e))+m}}),O.transition().duration(a.waveRiseTime).tween("text",function(){var t=d3.interpolate(this.textContent,c);return function(e){this.textContent=y(t(e))+m}})),a.waveRise?D.attr("transform","translate("+(h+2*x-F)+","+P(0)+")").transition().duration(a.waveRiseTime).attr("transform","translate("+(h+2*x-F)+","+P(u)+")").each("start",function(){U.attr("transform","translate(1,0)")}):D.attr("transform","translate("+(h+2*x-F)+","+P(u)+")"),a.waveAnimate&&n()}